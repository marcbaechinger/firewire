/*! firewire-stats 2013-09-30 */
!function(a){var b=function(a){var b=this,c=document.getElementById(a.id),d={};this.eventBus=new Observable,this.options=a,c.addEventListener("click",function(c){var d=c.target.dataset.action;d&&a.actions[d]&&a.actions[d].apply(b,arguments)},!1),c.addEventListener("change",function(c){var d=c.target.dataset.action;d&&a.changes[d]&&a.changes[d].apply(b,arguments)},!1),this.elements={},a.elements&&this.fetchElements(a.elements,c),this.eventBus.bind("model-update",function(a){b.render(a,c)}),this.init(a,d,c)};b.prototype.init=function(a,b){this.populateModel(b,a)},b.prototype.fetchElements=function(a,b){var c;for(c in a)this.elements[c]=b.querySelector(a[c])},b.prototype.populateModel=function(a,b){var c=this.eventBus;net.getJson(b.url,function(b){a.games=b,c.emit("model-update",a)})},b.prototype.render=function(a,b){var c=a.games.map(function(a,b){var c=[];return c.push("<li data-player='"),c.push(a.player),c.push("' data-id='"),c.push(a.id),c.push("' data-action='show-game' class='player "),c.push(a.type),c.push("'>"),c.push("<span data-action='show-game' class='rank'>"),c.push(b+1),c.push(".</span>"),c.push("<span data-action='show-game' class='player'>"),c.push(a.player),c.push("</span>"),c.push("<label data-action='show-game' class='duration'>"),c.push(format.time(a.duration)),c.push(" ("+a.score+")"),c.push("</label>"),c.push("</li>"),c.join("")});b.querySelector(".target").innerHTML=c.join("")},a.Application=b}(this);